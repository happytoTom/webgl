<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 算法阅读：https://en.wikipedia.org/wiki/Centroid#Centroid_of_polygon */

      function Point(x, y) {
        this.x = x;
        this.y = y;
      }

      // Contour object
      function Contour(points) {
        this.pts = points || []; // an array of Point objects defining the contour
      }

      Contour.prototype.area = function () {
        var area = 0;
        var pts = this.pts;
        var nPts = pts.length;
        var j = nPts - 1;
        var p1;
        var p2;

        for (var i = 0; i < nPts; j = i++) {
          p1 = pts[i];
          p2 = pts[j];
          area += p1.x * p2.y;
          area -= p1.y * p2.x;
        }
        area /= 2;

        return area;
      };

      Contour.prototype.centroid = function () {
        var pts = this.pts;
        var nPts = pts.length;
        var x = 0;
        var y = 0;
        var f;
        var j = nPts - 1;
        var p1;
        var p2;

        for (var i = 0; i < nPts; j = i++) {
          p1 = pts[i];
          p2 = pts[j];
          f = p1.x * p2.y - p2.x * p1.y;
          x += (p1.x + p2.x) * f;
          y += (p1.y + p2.y) * f;
        }

        f = this.area() * 6;

        return new Point(x / f, y / f);
      };

    //   var polygon = [
    //     {
    //       x: 770,
    //       y: 400,
    //     },
    //     {
    //       x: 529,
    //       y: 643,
    //     },
    //     {
    //       x: 320,
    //       y: 494,
    //     },
    //     {
    //       x: 424,
    //       y: 381,
    //     },
    //     {
    //       x: 459,
    //       y: 369,
    //     },
    //   ];

      let outLineList = [
        -0.16666666666666666,
        1,
        -0.20833333333333334,
        0.9759036144578314,
        -0.25,
        0.9759036144578314,
        -0.2916666666666667,
        0.9518072289156626,
        -0.3333333333333333,
        0.927710843373494,
        -0.375,
        0.9036144578313253,
        -0.375,
        0.8795180722891566,
        -0.4166666666666667,
        0.8554216867469879,
        -0.4166666666666667,
        0.8313253012048193,
        -0.4166666666666667,
        0.8072289156626506,
        -0.4166666666666667,
        0.7831325301204819,
        -0.4166666666666667,
        0.7590361445783133,
        -0.4166666666666667,
        0.7349397590361446,
        -0.4166666666666667,
        0.7108433734939759,
        -0.4166666666666667,
        0.6867469879518072,
        -0.4166666666666667,
        0.6626506024096386,
        -0.4583333333333333,
        0.6385542168674698,
        -0.4583333333333333,
        0.6144578313253012,
        -0.5,
        0.5903614457831325,
        -0.5416666666666666,
        0.5662650602409639,
        -0.5833333333333334,
        0.5421686746987951,
        -0.625,
        0.5180722891566265,
        -0.6666666666666666,
        0.4939759036144578,
        -0.6666666666666666,
        0.46987951807228917,
        -0.6666666666666666,
        0.4457831325301205,
        -0.7083333333333334,
        0.42168674698795183,
        -0.7083333333333334,
        0.39759036144578314,
        -0.7083333333333334,
        0.37349397590361444,
        -0.7083333333333334,
        0.3493975903614458,
        -0.7083333333333334,
        0.3253012048192771,
        -0.7083333333333334,
        0.30120481927710846,
        -0.7083333333333334,
        0.27710843373493976,
        -0.75,
        0.25301204819277107,
        -0.75,
        0.2289156626506024,
        -0.7916666666666666,
        0.20481927710843373,
        -0.7916666666666666,
        0.18072289156626506,
        -0.8333333333333334,
        0.1566265060240964,
        -0.8333333333333334,
        0.13253012048192772,
        -0.875,
        0.10843373493975904,
        -0.9166666666666666,
        0.08433734939759036,
        -0.9166666666666666,
        0.060240963855421686,
        -0.9583333333333334,
        0.03614457831325301,
        -1,
        0.012048192771084338,
        -1,
        -0.012048192771084338,
        -1,
        -0.03614457831325301,
        -1,
        -0.060240963855421686,
        -1,
        -0.08433734939759036,
        -1,
        -0.10843373493975904,
        -1,
        -0.13253012048192772,
        -1,
        -0.1566265060240964,
        -0.9583333333333334,
        -0.18072289156626506,
        -0.9583333333333334,
        -0.20481927710843373,
        -0.9166666666666666,
        -0.2289156626506024,
        -0.9166666666666666,
        -0.25301204819277107,
        -0.875,
        -0.27710843373493976,
        -0.875,
        -0.30120481927710846,
        -0.8333333333333334,
        -0.3253012048192771,
        -0.8333333333333334,
        -0.3493975903614458,
        -0.7916666666666666,
        -0.37349397590361444,
        -0.75,
        -0.39759036144578314,
        -0.7083333333333334,
        -0.39759036144578314,
        -0.6666666666666666,
        -0.39759036144578314,
        -0.625,
        -0.42168674698795183,
        -0.5833333333333334,
        -0.39759036144578314,
        -0.5416666666666666,
        -0.39759036144578314,
        -0.5,
        -0.39759036144578314,
        -0.4583333333333333,
        -0.39759036144578314,
        -0.4166666666666667,
        -0.39759036144578314,
        -0.375,
        -0.39759036144578314,
        -0.3333333333333333,
        -0.39759036144578314,
        -0.2916666666666667,
        -0.39759036144578314,
        -0.25,
        -0.39759036144578314,
        -0.20833333333333334,
        -0.39759036144578314,
        -0.16666666666666666,
        -0.37349397590361444,
        -0.125,
        -0.37349397590361444,
        -0.08333333333333333,
        -0.3493975903614458,
        -0.041666666666666664,
        -0.3253012048192771,
        -0.041666666666666664,
        -0.30120481927710846,
        -0.041666666666666664,
        -0.27710843373493976,
        0,
        -0.25301204819277107,
        0,
        -0.2289156626506024,
        0,
        -0.20481927710843373,
        -0.041666666666666664,
        -0.18072289156626506,
        -0.041666666666666664,
        -0.1566265060240964,
        -0.041666666666666664,
        -0.13253012048192772,
        -0.08333333333333333,
        -0.10843373493975904,
        -0.08333333333333333,
        -0.08433734939759036,
        -0.08333333333333333,
        -0.060240963855421686,
        -0.125,
        -0.03614457831325301,
        -0.125,
        -0.012048192771084338,
        -0.125,
        0.012048192771084338,
        -0.08333333333333333,
        0.03614457831325301,
        -0.08333333333333333,
        0.060240963855421686,
        -0.041666666666666664,
        0.08433734939759036,
        -0.041666666666666664,
        0.10843373493975904,
        0,
        0.13253012048192772,
        0.041666666666666664,
        0.1566265060240964,
        0.041666666666666664,
        0.18072289156626506,
        0.08333333333333333,
        0.20481927710843373,
        0.125,
        0.2289156626506024,
        0.16666666666666666,
        0.25301204819277107,
        0.20833333333333334,
        0.27710843373493976,
        0.25,
        0.30120481927710846,
        0.25,
        0.3253012048192771,
        0.2916666666666667,
        0.3493975903614458,
        0.2916666666666667,
        0.37349397590361444,
        0.2916666666666667,
        0.39759036144578314,
        0.2916666666666667,
        0.42168674698795183,
        0.2916666666666667,
        0.4457831325301205,
        0.2916666666666667,
        0.46987951807228917,
        0.2916666666666667,
        0.4939759036144578,
        0.2916666666666667,
        0.5180722891566265,
        0.3333333333333333,
        0.5421686746987951,
        0.3333333333333333,
        0.5662650602409639,
        0.3333333333333333,
        0.5903614457831325,
        0.375,
        0.6144578313253012,
        0.375,
        0.6385542168674698,
        0.4166666666666667,
        0.6626506024096386,
        0.4166666666666667,
        0.6867469879518072,
        0.4166666666666667,
        0.7108433734939759,
        0.4166666666666667,
        0.7349397590361446,
        0.4166666666666667,
        0.7590361445783133,
        0.4166666666666667,
        0.7831325301204819,
        0.375,
        0.8072289156626506,
        0.375,
        0.8313253012048193,
        0.4166666666666667,
        0.8554216867469879,
        0.4166666666666667,
        0.8795180722891566,
        0.375,
        0.8795180722891566,
        0.3333333333333333,
        0.9036144578313253,
        0.2916666666666667,
        0.927710843373494,
        0.25,
        0.927710843373494,
        0.20833333333333334,
        0.9518072289156626,
        0.16666666666666666,
        0.9518072289156626,
        0.125,
        0.9759036144578314,
        0.08333333333333333,
        0.9759036144578314,
        0.041666666666666664,
        0.9759036144578314,
        0,
        1,
        -0.041666666666666664,
        1,
        -0.08333333333333333,
        1,
        -0.125,
        1,
      ];
      let polygon = [];
      outLineList.forEach((item,index)=>{
        polygon.push({x:outLineList[index],y:outLineList[index + 1]})
      })

      var con = new Contour(polygon);
      center = con.centroid();

      console.log("x: " + center.x + " y: " + center.y);
    </script>
  </body>
</html>
